const e=document.querySelector("#txt-name"),t=document.querySelector("#txt-contact"),a=document.querySelector("#btn-save"),n=document.querySelector("#tbl-body"),c="http://localhost:8080";let l=0;function r(e){let t=document.createElement("tr");t.id="teacher-"+task.id,t.innerHTML=`            
                        <td>${e.name}</td>
                        <td>${e.contact}</td>
                        <td class="d-flex justify-content-center">
                            <i class="edit bi bi-pencil-fill me-3" title="Edit"></i>
                            <i class="delete bi bi-trash3-fill" title="Delete"></i>
                        </td>
            `,n.append(t)}fetch(`${c}/app/teachers`).then(e=>{e.ok?e.json().then(e=>e.forEach(e=>r(e))):alert("Faild to load teacher list")}).catch(e=>{alert("Something went wrong please try again")}),a.addEventListener("click",()=>{if("SAVE"===a.innerText){let a=e.value,n=t.value;if(0===a.trim().length){e.focus(),e.select();return}0===n.trim().length&&(t.focus(),t.select()),fetch(`${c}/app/teachers`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e.value,contact:t.value})}).then(a=>{a.ok?a.json().then(a=>{r(a),e.value="",t.value="",e.focus(),t.focus()}):alert("Faild to add teacher")}).catch(e=>{alert("Something went worng. Try again later")})}else if("UPDATE"===a.innerText){let a={name:e.value,contact:t.value};fetch(`${c}/app/teachers/${l}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then(a=>{a.ok?(e.value="",t.value=""):(e.focus(),alert("Failed to update the teacher"))}).catch(t=>{e.focus(),alert("Something went wrong, try again")})}}),n.addEventListener("click",n=>{n.target?.classList.contains("delete")?(l=n.target.closest("tr").id.substring(8),fetch(`${c}/app/teachers/${l}`,{method:"DELETE"}).then(e=>{e.ok?n.target.closest("tr").remove():alert("Faild to delete the teacher")}).catch(e=>{alert("Something went wrong, try again")})):n.target?.classList.contains("edit")&&(l=n.target.closest("tr").id.substring(8),e.value=n.target.closest("#td-name").innerText,t.value=n.target.closest("#td-contact").innerText,a.innerText="UPDATE")}),t.addEventListener("keypress",e=>{"Enter"===e.key&&a.click()});
//# sourceMappingURL=teachers.027e8497.js.map
